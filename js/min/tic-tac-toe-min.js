function gameStart(){ttt.init(),$("body div").remove(),$("body").append(htmlBoard),$(".players span").remove(),$("#player1").prepend("<span>"+ttt.p1+"</span>"),$("#player2").prepend("<span>"+ttt.p2+"</span>"),$(".box").attr("class","box"),$(".box").css("background-image","none"),activatePlayer(1)}function gameEnd(t){$("body div").remove(),$("body").append(htmlWin);var e="",a="";switch(t){case 1:e="screen-win-one",a=ttt.p1+" Won!";break;case 2:e="screen-win-two",a=ttt.p2+" Won!";break;case 3:e="screen-win-tie",a="It's a Tie!"}$(".message").text(a),$(".screen").addClass(e),$(".button").click(function(){gameStart()})}function activatePlayer(t){var e="",a="",i="";if(1===t?(e="#player1",a="img/o.svg",i="box-filled-1"):(e="#player2",a="img/x.svg",i="box-filled-2"),$(".players").removeClass("active"),$(e).addClass("active"),$(".boxes li").unbind("mouseenter mouseleave"),$(".boxes li").unbind("click"),"Computer"!==ttt.players[t-1].name)$(".boxes li:not(.box-filled-1, .box-filled-2, .box-filled-ai)").hover(function(){$(this).css("background-image","url("+a+")")},function(){$(this).css("background-image","")}),$(".boxes li:not(.box-filled-1, .box-filled-2, .box-filled-ai)").click(function(){var e=ttt.playMove($(this).index());$(this).addClass(i),$(this).unbind("mouseenter mouseleave"),e>0&&9!==e?gameEnd(e):activatePlayer(1===t?2:1)});else{var s=ttt.pickAiMove();setTimeout(function(){$(".box").eq(s).addClass("box-filled-ai").css("background-image","url("+a+")");var t=ttt.playMove(s);t>0?gameEnd(t):setTimeout(function(){activatePlayer(1)},500)},500)}}function gameInit(){$("body div").remove(),$("body").append(htmlStart),$(".player-names").hide(),$(".btn-start").hide(),$(".btn-opp-human").click(function(){$(".button").hide(),$("#start p").hide(),$(".btn-start").show(),$(".player-names").show().children().first().focus(),$("#p2-name").keyup(function(t){13===t.which&&$(".btn-start").trigger("click")})}),$(".btn-opp-computer").click(function(){$(".button").hide(),$("#start p").hide(),$(".btn-start").show(),$(".player-names").show().children().first().focus(),$("#p2-name").hide().val("Computer"),$("#p1-name").keyup(function(t){13===t.which&&$(".btn-start").trigger("click")})}),$(".btn-start").click(function(){ttt.players[0].name=""!==$(".player-names input").eq(0).val()?$(".player-names input").eq(0).val():"Player One",ttt.players[1].name=""!==$(".player-names input").eq(1).val()?$(".player-names input").eq(1).val():"Player Two",gameStart()})}var TttPlayer=function(){function t(t,e,a){this.name=t||"None",this.score=e||0,this.isAI=!1}return t.prototype={},t}(),TttGame=function(){function t(){this.players=[new TttPlayer("P1",0,!1),new TttPlayer("P2",0,!1)],this.cp=1,this.board=[0,0,0,0,0,0,0,0,0]}return t.prototype={init:function(){this.p1=this.players[0].name,this.p2=this.players[1].name,this.cp=1,this.board=[0,0,0,0,0,0,0,0,0]},numMovesLeft:function(){for(var t=0,e=0;e<this.board.length;e++)0===this.board[e]&&t++;return t},checkCells:function(t,e,a){return this.board[t]===this.board[e]&&this.board[e]===this.board[a]&&this.board[t]>0},checkBoard:function(){var t=0;return this.checkCells(0,1,2)?t=this.board[1]:this.checkCells(3,4,5)?t=this.board[3]:this.checkCells(6,7,8)?t=this.board[6]:this.checkCells(0,3,6)?t=this.board[0]:this.checkCells(1,4,7)?t=this.board[1]:this.checkCells(2,5,8)?t=this.board[2]:this.checkCells(0,4,8)?t=this.board[0]:this.checkCells(2,4,6)&&(t=this.board[2]),t},playMove:function(t){if(t>=0&&t<=8&&0===this.board[t]){this.board[t]=this.cp;var e=this.checkBoard();return 0===e?this.numMovesLeft()>0?(1===this.cp?this.cp=2:this.cp=1,0):3:(this.players[e-1].score++,e)}return 9},pickAiMove:function(){for(var t=[],e=0;e<this.board.length;e++)0===this.board[e]&&t.push(e);return t[Math.floor(Math.random()*t.length)]}},t}(),htmlStart='<div class="screen screen-start" id="start"><header><h1>Tic Tac Toe</h1><div class="player-names">\t<input type="text" placeholder="Player One" id="p1-name">\t<input type="text" placeholder="Player Two" id="p2-name"></div><p class="intro-message">Please pick an opponent</p><a href="#" class="button btn-opp-human">Human</a><a href="#" class="button btn-opp-computer">Computer</a><a href="#" class="button btn-start">Start game</a></header></div>',htmlWin='<div class="screen screen-win" id="finish"><header><h1>Tic Tac Toe</h1><p class="message">Winner</p><a href="#" class="button">New game</a></header></div>',ttt=new TttGame,htmlBoard=$("#board");gameInit();