function gameInit(){$("body div").remove(),$("body").append(htmlStart),$(".player-names").hide(),$(".btn-start").hide(),$(".btn-opp-human").click(function(){$(".button").hide(),$("#start p").hide(),$(".btn-start").show(),$(".player-names").show().children().first().focus()}),$(".btn-start").click(function(){ttt.players[0].name=""!==$(".player-names input").eq(0).val()?$(".player-names input").eq(0).val():"Player One",ttt.players[1].name=""!==$(".player-names input").eq(1).val()?$(".player-names input").eq(1).val():"Player Two",gameStart()})}function gameEnd(e){$("body div").remove(),$("body").append(htmlWin);var t="",a="";switch(e){case 1:t="screen-win-one",a=ttt.p1+" Won!";break;case 2:t="screen-win-two",a=ttt.p2+" Won!";break;case 3:t="screen-win-tie",a="It's a Tie!"}$(".message").text(a),$(".screen").addClass(t),$(".button").click(function(){gameStart()})}function activatePlayer(e){var t="",a="",s="";1===e?(t="#player1",a="img/o.svg",s="box-filled-1"):(t="#player2",a="img/x.svg",s="box-filled-2"),$(".players").removeClass("active"),$(t).addClass("active"),$(".boxes li").unbind("mouseenter mouseleave"),$(".boxes li").unbind("click"),$(".boxes li:not(.box-filled-1, .box-filled-2)").hover(function(){$(this).css("background-image","url("+a+")")},function(){$(this).css("background-image","none")}),$(".boxes li:not(.box-filled-1, .box-filled-2)").click(function(){var t=ttt.playMove($(this).index());$(this).addClass(s),$(this).unbind("mouseenter mouseleave"),t>0&&9!==t?gameEnd(t):activatePlayer(1===e?2:1)})}function gameStart(){ttt.init(),$("body div").remove(),$("body").append(htmlBoard),$(".players span").remove(),$("#player1").prepend("<span>"+ttt.p1+"</span>"),$("#player2").prepend("<span>"+ttt.p2+"</span>"),$(".box").attr("class","box"),$(".box").css("background-image","none"),activatePlayer(1)}var TttPlayer=function(){function e(e,t,a){this.name=e||"None",this.score=t||0,this.isAI=!1}return e.prototype={},e}(),TttGame=function(){function e(){this.players=[new TttPlayer("P1",0,!1),new TttPlayer("P2",0,!1)],this.cp=1,this.board=[0,0,0,0,0,0,0,0,0]}return e.prototype={init:function(){this.p1=this.players[0].name,this.p2=this.players[1].name,this.cp=1,this.board=[0,0,0,0,0,0,0,0,0]},numMovesLeft:function(){for(var e=0,t=0;t<this.board.length;t++)0===this.board[t]&&e++;return e},checkCells:function(e,t,a){return this.board[e]===this.board[t]&&this.board[t]===this.board[a]&&this.board[e]>0},checkBoard:function(){var e=0;return this.checkCells(0,1,2)?e=this.board[1]:this.checkCells(3,4,5)?e=this.board[3]:this.checkCells(6,7,8)?e=this.board[6]:this.checkCells(0,3,6)?e=this.board[0]:this.checkCells(1,4,7)?e=this.board[1]:this.checkCells(2,5,8)?e=this.board[2]:this.checkCells(0,4,8)?e=this.board[0]:this.checkCells(2,4,6)&&(e=this.board[2]),e},playMove:function(e){if(e>=0&&e<=8&&0===this.board[e]){ttt.board[e]=ttt.cp;var t=this.checkBoard();return 0===t?this.numMovesLeft()>0?(1===this.cp?this.cp=2:this.cp=1,0):3:(this.players[t-1].score++,t)}return 9}},e}(),htmlStart='<div class="screen screen-start" id="start"><header><h1>Tic Tac Toe</h1><div class="player-names">\t<input type="text" placeholder="Player One" id="p1-name">\t<input type="text" placeholder="Player Two" id="p2-name"></div><p class="intro-message">Please pick an opponent</p><a href="#" class="button btn-opp-human">Human</a><a href="#" class="button btn-opp-computer">Computer</a><a href="#" class="button btn-start">Start game</a></header></div>',htmlWin='<div class="screen screen-win" id="finish"><header><h1>Tic Tac Toe</h1><p class="message">Winner</p><a href="#" class="button">New game</a></header></div>',ttt=new TttGame,htmlBoard=$("#board");gameInit();